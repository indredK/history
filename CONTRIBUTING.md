# è´¡çŒ®æŒ‡å— (Contributing Guidelines)

é¦–å…ˆï¼Œæ„Ÿè°¢ä½ å¯¹ **ä¸­å›½å†å²å…¨è§†ç•Œ** é¡¹ç›®çš„å…´è¶£ï¼æˆ‘ä»¬çƒ­çƒˆæ¬¢è¿å„ç±»è´¡çŒ®è€…åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºã€‚æœ¬æ–‡æ¡£å°†æŒ‡å¯¼ä½ å¦‚ä½•ä»¥æœ€æœ‰æ•ˆçš„æ–¹å¼å‚ä¸é¡¹ç›®ã€‚

---

## ğŸ“‹ ç›®å½•

1. [è¡Œä¸ºå‡†åˆ™](#è¡Œä¸ºå‡†åˆ™)
2. [è´¡çŒ®ç±»å‹](#è´¡çŒ®ç±»å‹)
3. [å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)
4. [å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)
5. [ä»£ç é£æ ¼ä¸è§„èŒƒ](#ä»£ç é£æ ¼ä¸è§„èŒƒ)
6. [æäº¤ Issue](#æäº¤-issue)
7. [æäº¤ Pull Request](#æäº¤-pull-request)
8. [ä»£ç å®¡æŸ¥è¿‡ç¨‹](#ä»£ç å®¡æŸ¥è¿‡ç¨‹)
9. [æ•°æ®è´¡çŒ®æŒ‡å—](#æ•°æ®è´¡çŒ®æŒ‡å—)
10. [è®¸å¯ä¸ç½²å](#è®¸å¯ä¸ç½²å)

---

## è¡Œä¸ºå‡†åˆ™

æˆ‘ä»¬é‡‡çº³ [Contributor Covenant](https://www.contributor-covenant.org/) ä½œä¸ºæœ¬é¡¹ç›®çš„è¡Œä¸ºå‡†åˆ™ï¼Œè¯·å‚è€ƒ [CODE_OF_CONDUCT.md](./CODE_OF_CONDUCT.md)ã€‚

**ç®€è€Œè¨€ä¹‹**ï¼š
- å°Šé‡æ‰€æœ‰å‚ä¸è€…ï¼Œæ— è®ºèƒŒæ™¯æˆ–èº«ä»½
- æ˜ç¡®ã€å»ºè®¾æ€§åœ°äº¤æµ
- æ¥å—æ‰¹è¯„ï¼Œå¿«é€Ÿæ”¹æ­£é”™è¯¯
- å…³æ³¨é¡¹ç›®ç›®æ ‡ï¼Œè€Œéä¸ªäººè§‚ç‚¹å†²çª

---

## è´¡çŒ®ç±»å‹

### 1. ä»£ç è´¡çŒ®
- **åŠŸèƒ½å¼€å‘**ï¼šå®ç°æ–°ç‰¹æ€§ï¼ˆæ—¶é—´è½´ã€åœ°å›¾äº¤äº’ã€æŸ¥è¯¢åŠŸèƒ½ç­‰ï¼‰
- **Bug ä¿®å¤**ï¼šä¿®å¤å·²æŠ¥å‘Šçš„é—®é¢˜
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæ”¹è¿›ä»£ç æ€§èƒ½æˆ– UX å“åº”é€Ÿåº¦
- **æµ‹è¯•ç¼–å†™**ï¼šè¡¥å……å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•æˆ–ç«¯åˆ°ç«¯æµ‹è¯•
- **é‡æ„ä¸æ¸…ç†**ï¼šæ”¹è¿›ä»£ç è´¨é‡ã€å»é™¤æŠ€æœ¯å€º

### 2. æ•°æ®è´¡çŒ®
- **æ·»åŠ å†å²äº‹ä»¶**ï¼šè¡¥å……æ–°çš„å†å²äº‹ä»¶è®°å½•ä¸ç›¸å…³ä¿¡æ¯
- **æ·»åŠ å†å²äººç‰©**ï¼šå®Œå–„äººç‰©ä¼ è®°ã€å¹´ä»£ä¿¡æ¯ã€ç›¸å…³äº‹ä»¶
- **åœ°å›¾æ•°æ®**ï¼šè¡¥å……æˆ–æ”¹è¿›ä¸åŒæ—¶æœŸçš„ç–†åŸŸä¸è¡Œæ”¿åŒºåˆ’è¾¹ç•Œ
- **æ•°æ®æ”¹è¿›**ï¼šä¿®æ­£å·²æœ‰æ•°æ®çš„é”™è¯¯ã€è¡¥å……ç¼ºå¤±å­—æ®µã€ä¼˜åŒ–æ•°æ®ç»“æ„
- **æ•°æ®æ¥æºéªŒè¯**ï¼šä¸ºå·²æœ‰æ•°æ®è¡¥å……å­¦æœ¯æ¥æºä¸å¼•ç”¨

### 3. æ–‡æ¡£è´¡çŒ®
- **ç¼–å†™æˆ–ç¿»è¯‘æ–‡æ¡£**ï¼šAPI æ–‡æ¡£ã€ç”¨æˆ·æŒ‡å—ã€æŠ€æœ¯æ–‡æ¡£
- **ä¿®æ­£æ–‡æ¡£**ï¼šæ”¹æ­£è¯­æ³•ã€è¡¥å……è¯´æ˜ã€æ›´æ–°è¿‡æ—¶å†…å®¹
- **æ•™ç¨‹ä¸ç¤ºä¾‹**ï¼šç¼–å†™ä½¿ç”¨æ•™ç¨‹ã€ç¤ºä¾‹ä»£ç ã€æ¼”ç¤ºè„šæœ¬
- **æœ¬åœ°åŒ–**ï¼šç¿»è¯‘é¡¹ç›®æ–‡æ¡£ä¸ºå…¶ä»–è¯­è¨€

### 4. è®¾è®¡è´¡çŒ®
- **UI/UX æ”¹è¿›**ï¼šç•Œé¢è®¾è®¡ä¼˜åŒ–ã€ç”¨æˆ·ä½“éªŒæå‡
- **å¯è§†åŒ–è®¾è®¡**ï¼šåœ°å›¾æ ·å¼ã€è‰²å½©æ–¹æ¡ˆã€å›¾è¡¨å±•ç¤ºä¼˜åŒ–
- **åŸå‹è®¾è®¡**ï¼šä¸ºæ–°åŠŸèƒ½ç»˜åˆ¶åŸå‹æˆ–äº¤äº’ç¤ºæ„å›¾

### 5. å…¶ä»–è´¡çŒ®
- **é”™è¯¯åé¦ˆ**ï¼šæŠ¥å‘Š bug å¹¶æä¾›å¤ç°æ­¥éª¤
- **åŠŸèƒ½å»ºè®®**ï¼šæå‡ºæœ‰æ„ä¹‰çš„æ–°åŠŸèƒ½æˆ–æ”¹è¿›å»ºè®®
- **ç¤¾åŒºç»´æŠ¤**ï¼šå¸®åŠ©å›ç­”é—®é¢˜ã€å®¡æŸ¥ PRã€å‚ä¸è®¨è®º

---

## å¼€å‘ç¯å¢ƒè®¾ç½®

### å‰ç½®è¦æ±‚

- **Node.js** >= 16ï¼ˆæ¨è 18 LTSï¼‰
- **npm** >= 8 æˆ– **yarn**
- **Git** >= 2.30
- **Docker** & **Docker Compose**ï¼ˆå¯é€‰ï¼Œç”¨äºæ•°æ®åº“ä¸æœåŠ¡å®¹å™¨åŒ–ï¼‰
- **PostgreSQL** >= 12 + **PostGIS**ï¼ˆæˆ–é€šè¿‡ Docker ä½¿ç”¨ï¼‰

### æ­¥éª¤ 1ï¼šFork ä¸å…‹éš†

```bash
# 1. Fork é¡¹ç›®ï¼ˆè®¿é—® GitHub ç½‘é¡µç‰ˆï¼Œç‚¹å‡» Forkï¼‰

# 2. å…‹éš†ä½ çš„ Fork
git clone https://github.com/<your-username>/chinese-historical-panorama.git
cd chinese-historical-panorama

# 3. æ·»åŠ ä¸Šæ¸¸è¿œç¨‹ï¼ˆupstreamï¼‰ç”¨äºåŒæ­¥æ›´æ–°
git remote add upstream https://github.com/original-org/chinese-historical-panorama.git
```

### æ­¥éª¤ 2ï¼šåˆ›å»ºå¼€å‘åˆ†æ”¯

```bash
# åŒæ­¥æœ€æ–°çš„ä»£ç 
git fetch upstream main
git rebase upstream/main

# åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯
git checkout -b feature/your-feature-name
# æˆ–ä¿®å¤åˆ†æ”¯
git checkout -b fix/your-bug-fix
```

### æ­¥éª¤ 3ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ

#### å¯åŠ¨æ•°æ®åº“
```bash
# æ–¹å¼ Aï¼šä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰
docker-compose up -d postgres redis

# æ–¹å¼ Bï¼šæœ¬åœ° PostgreSQL
createdb history_dev
psql history_dev -c "CREATE EXTENSION postgis;"
```

#### åˆå§‹åŒ–åç«¯
```bash
cd backend
npm install
cp .env.example .env  # é…ç½®ç¯å¢ƒå˜é‡
npm run migrate       # è¿è¡Œæ•°æ®åº“è¿ç§»
npm run seed         # å¯¼å…¥æ ·ä¾‹æ•°æ®
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (localhost:3000)
```

#### åˆå§‹åŒ–å‰ç«¯
```bash
cd ../frontend
npm install
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (localhost:5173)
```

#### éªŒè¯ç¯å¢ƒ
```bash
# åç«¯ API å¥åº·æ£€æŸ¥
curl http://localhost:3000/health

# å‰ç«¯åº”è¯¥å¯ä»¥è®¿é—®
open http://localhost:5173
```

### æ­¥éª¤ 4ï¼šè¿è¡Œæµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend
npm test              # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:watch   # ç›‘å¬æ¨¡å¼

# å‰ç«¯æµ‹è¯•
cd ../frontend
npm test              # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:coverage # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```

---

## å·¥ä½œæµç¨‹

### 1. é€‰æ‹©ä»»åŠ¡

- æŸ¥çœ‹ [GitHub Issues](https://github.com) æˆ– [ROADMAP.md](./ROADMAP.md) ä¸­çš„å¾…åšä»»åŠ¡
- å¯»æ‰¾æ ‡æœ‰ `good-first-issue`ï¼ˆé€‚åˆæ–°æ‰‹ï¼‰æˆ– `help-wanted`ï¼ˆæœ‰éœ€è¦ï¼‰çš„ä»»åŠ¡
- ä¹Ÿå¯ä»¥åœ¨ [Discussions](https://github.com) ä¸­æå‡ºæ–°æƒ³æ³•

### 2. åˆ›å»ºåˆ†æ”¯

éµå¾ªåˆ†æ”¯å‘½åè§„èŒƒï¼š
```
feature/<feature-name>      # æ–°åŠŸèƒ½
fix/<bug-description>       # Bug ä¿®å¤
docs/<topic>               # æ–‡æ¡£æ›´æ–°
data/<dataset-name>        # æ•°æ®è´¡çŒ®
refactor/<area>            # é‡æ„
test/<test-subject>        # æµ‹è¯•ç›¸å…³
```

ç¤ºä¾‹ï¼š
```bash
git checkout -b feature/add-search-filter
git checkout -b fix/map-loading-issue
git checkout -b data/tang-dynasty-boundaries
```

### 3. è¿›è¡Œå¼€å‘

- ç¼–å†™ä»£ç ã€æ·»åŠ æµ‹è¯•ã€æ›´æ–°æ–‡æ¡£
- å®šæœŸæäº¤ï¼Œæ¯ä¸ªæäº¤åº”è¯¥æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ã€æœ‰æ„ä¹‰çš„æ”¹åŠ¨
- éµå¾ªä»£ç é£æ ¼è§„èŒƒï¼ˆè§ä¸‹ä¸€èŠ‚ï¼‰
- æäº¤å‰ç¡®ä¿æµ‹è¯•é€šè¿‡

### 4. æäº¤ Commit

éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type åˆ—è¡¨**ï¼š
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: ä»£ç é‡æ„
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºã€ä¾èµ–æ›´æ–°ç­‰

**Scope èŒƒå›´**ï¼š
- `frontend`: å‰ç«¯ç›¸å…³
- `backend`: åç«¯ç›¸å…³
- `data`: æ•°æ®ç›¸å…³
- `ci`: CI/CD ç›¸å…³
- `docs`: æ–‡æ¡£ç›¸å…³

**Subject ä¸»é¢˜**ï¼š
- ä½¿ç”¨è‹±æ–‡æˆ–ä¸­æ–‡ï¼Œç®€æ˜æ‰¼è¦ï¼ˆ50 å­—ä»¥å†…ï¼‰
- ä½¿ç”¨ç¥ˆä½¿è¯­æ€ï¼Œä¸è¦ç”¨è¿‡å»æ—¶ï¼ˆå¦‚ "add" è€Œé "added"ï¼‰
- ä¸è¦é¦–å­—æ¯å¤§å†™

**ç¤ºä¾‹**ï¼š
```
feat(frontend): add timeline range selector

Allow users to drag timeline to select date range,
filtering events and map data accordingly.

Closes #123
```

```
fix(data): correct Tang dynasty boundary coordinates

Fixed incorrect latitude/longitude values for
eastern province boundaries. Source verified
against CHGIS dataset v6.0.
```

### 5. æäº¤ Push

```bash
# æ›´æ–°æœ¬åœ°åˆ†æ”¯
git fetch upstream main

# å¦‚æœæœ‰å†²çªï¼Œè¿›è¡Œ rebase
git rebase upstream/main

# Push åˆ°ä½ çš„ fork
git push origin feature/your-feature-name
```

---

## ä»£ç é£æ ¼ä¸è§„èŒƒ

### å‰ç«¯ï¼ˆReact + TypeScriptï¼‰

#### å‘½åè§„èŒƒ
- ç»„ä»¶æ–‡ä»¶ï¼šPascalCase (e.g., `TimelineControl.tsx`)
- å·¥å…·å‡½æ•°ï¼šcamelCase (e.g., `formatDate.ts`)
- å¸¸é‡ï¼šUPPER_SNAKE_CASE (e.g., `const MAX_ZOOM_LEVEL = 20`)
- CSS ç±»åï¼škebab-case (e.g., `timeline-container`)

#### Linting & Formatting
```bash
# è‡ªåŠ¨ä¿®å¤æ ¼å¼é—®é¢˜
npm run lint:fix
npm run format

# åœ¨æäº¤å‰æ£€æŸ¥
npm run lint
npm run format:check
```

#### TypeScript è§„èŒƒ
- å°½é‡ä½¿ç”¨ç±»å‹æ³¨è§£ï¼Œé¿å… `any`
- ä¸º propsã€stateã€å‡½æ•°å‚æ•°å’Œè¿”å›å€¼æ·»åŠ ç±»å‹
- ç¤ºä¾‹ï¼š
```typescript
interface TimelineProps {
  startDate: Date;
  endDate: Date;
  onDateChange: (date: Date) => void;
}

const TimelineControl: React.FC<TimelineProps> = ({
  startDate,
  endDate,
  onDateChange,
}) => {
  // implementation
};
```

#### React æœ€ä½³å®è·µ
- ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ä¸ Hooks
- é¿å…æ·±å±‚åµŒå¥—ï¼Œä½¿ç”¨åˆç†çš„ç»„ä»¶æ‹†åˆ†
- ä½¿ç”¨ `useCallback`ã€`useMemo` ä¼˜åŒ–æ€§èƒ½
- ä¸ºç»„ä»¶æ·»åŠ  PropTypes æˆ– TypeScript æ£€æŸ¥

### åç«¯ï¼ˆNode.js / FastAPIï¼‰

#### Node.js (TypeScript + Express/NestJS)
- å‘½åè§„èŒƒï¼šcamelCase for variables/functionsï¼ŒPascalCase for classes/types
- æ¨¡å—ç»„ç»‡ï¼š`src/` ç›®å½•ä¸‹æŒ‰ `models/`, `routes/`, `services/`, `utils/` åˆ†å±‚
- å¼‚æ­¥å¤„ç†ï¼šä½¿ç”¨ async/awaitï¼Œé¿å…å›è°ƒåµŒå¥—
- é”™è¯¯å¤„ç†ï¼šä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼

ç¤ºä¾‹ï¼š
```typescript
// route.ts
import { Router } from 'express';
import { EventService } from '../services/event.service';

export const eventRouter = Router();

eventRouter.get('/events/:id', async (req, res, next) => {
  try {
    const event = await EventService.findById(req.params.id);
    res.json({ data: event });
  } catch (error) {
    next(error);
  }
});
```

#### Python (FastAPI)
- å‘½åè§„èŒƒï¼šsnake_case for functionsï¼ŒPascalCase for classes
- æ¨¡å—ç»„ç»‡ï¼š`app/` ç›®å½•ä¸‹åˆ† `models/`, `routes/`, `services/`, `utils/`
- ç±»å‹æç¤ºï¼šä¸ºæ‰€æœ‰å‡½æ•°å‚æ•°å’Œè¿”å›å€¼æ·»åŠ ç±»å‹æ³¨è§£
- å¼‚å¸¸å¤„ç†ï¼šæ•è·å¹¶è¿”å›ç»“æ„åŒ–é”™è¯¯ä¿¡æ¯

ç¤ºä¾‹ï¼š
```python
from fastapi import APIRouter, HTTPException
from app.services.event_service import EventService

router = APIRouter(prefix="/events", tags=["events"])

@router.get("/{event_id}")
async def get_event(event_id: str) -> dict:
    try:
        event = await EventService.find_by_id(event_id)
        return {"data": event}
    except EventNotFoundError as e:
        raise HTTPException(status_code=404, detail=str(e))
```

### æ•°æ®ä¸ SQL

- ä½¿ç”¨ ORMï¼ˆPrisma / SQLAlchemyï¼‰è€ŒéåŸå§‹ SQLï¼ˆç‰¹æ®ŠæŸ¥è¯¢é™¤å¤–ï¼‰
- SQL å…³é”®å­—å¤§å†™ï¼Œè¡¨å/åˆ—åå°å†™
- ä¸ºå¤æ‚çš„ç©ºé—´æŸ¥è¯¢æ·»åŠ æ³¨é‡Š
- GeoJSON æ–‡ä»¶æ ¼å¼åŒ–ï¼ˆä½¿ç”¨ jq æˆ– Python çš„ json.toolï¼‰

---

## æäº¤ Issue

### ä½•æ—¶æäº¤ Issue

- å‘ç° bug
- æœ‰åŠŸèƒ½è¯·æ±‚
- æ–‡æ¡£ä¸æ¸…æ¥šæˆ–æœ‰é”™è¯¯
- æ€§èƒ½é—®é¢˜
- è®¨è®ºæ–°æƒ³æ³•

### Issue æ¨¡æ¿

æäº¤ Issue æ—¶ï¼Œè¯·ä½¿ç”¨ç›¸åº”çš„æ¨¡æ¿ï¼ˆGitHub ä¼šè‡ªåŠ¨æç¤ºï¼‰ã€‚ä»¥ä¸‹æ˜¯åŸºæœ¬è¦æ±‚ï¼š

#### Bug æŠ¥å‘Š
```markdown
## é—®é¢˜æè¿°
æ¸…æ™°ç®€æ´åœ°æè¿° bug æ˜¯ä»€ä¹ˆã€‚

## å¤ç°æ­¥éª¤
1. è®¿é—® ...
2. ç‚¹å‡» ...
3. çœ‹åˆ° ...

## é¢„æœŸè¡Œä¸º
åº”è¯¥å‘ç”Ÿä»€ä¹ˆã€‚

## å®é™…è¡Œä¸º
å®é™…å‘ç”Ÿäº†ä»€ä¹ˆã€‚

## ç¯å¢ƒä¿¡æ¯
- æµè§ˆå™¨/OS: [e.g., Chrome on macOS]
- Node.js ç‰ˆæœ¬: [e.g., 16.13.0]
- é¡¹ç›®ç‰ˆæœ¬: [e.g., 0.1.0]

## é™„åŠ ä¸Šä¸‹æ–‡
æˆªå›¾ã€æ—¥å¿—æˆ–å…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚
```

#### åŠŸèƒ½è¯·æ±‚
```markdown
## åŠŸèƒ½æè¿°
ç®€æ´æè¿°ä½ æƒ³è¦çš„åŠŸèƒ½ã€‚

## ä½¿ç”¨åœºæ™¯
è¿™ä¸ªåŠŸèƒ½è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

## å»ºè®®çš„å®ç°æ–¹å¼
å¯é€‰çš„æŠ€æœ¯å»ºè®®ã€‚

## ç›¸å…³ Issue
æ˜¯å¦æœ‰ç›¸å…³çš„ issue æˆ–è®¨è®ºã€‚
```

---

## æäº¤ Pull Request

### åˆ›å»º PR

1. åœ¨ GitHub ç½‘é¡µç‰ˆç‚¹å‡» "New Pull Request"
2. é€‰æ‹© base åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ `main` æˆ– `develop`ï¼‰å’Œä½ çš„ feature åˆ†æ”¯
3. å¡«å†™ PR æ¨¡æ¿ï¼ˆè‡ªåŠ¨æ˜¾ç¤ºï¼‰

### PR æ¨¡æ¿

```markdown
## ç›¸å…³ Issue
ä¿®å¤ #123 æˆ–å…³è” #456

## æ›´æ”¹æè¿°
ç®€æ´æè¿°ä½ åšäº†ä»€ä¹ˆæ”¹åŠ¨ã€‚

## æ›´æ”¹ç±»å‹
- [ ] Bug ä¿®å¤
- [ ] æ–°åŠŸèƒ½
- [ ] ç ´åæ€§æ”¹åŠ¨ï¼ˆBreaking changeï¼‰
- [ ] æ–‡æ¡£æ›´æ–°

## æµ‹è¯•
- [ ] æ·»åŠ äº†æ–°æµ‹è¯•
- [ ] æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡
- [ ] æœªæ·»åŠ æ–°æµ‹è¯•ï¼ˆè¯·è¯´æ˜ä¸ºä»€ä¹ˆï¼‰

## æ•°æ®è´¡çŒ®ç‰¹æœ‰
- [ ] æä¾›äº†æ•°æ®æ¥æºä¸è®¸å¯ä¿¡æ¯
- [ ] éªŒè¯äº†æ•°æ®å‡†ç¡®æ€§
- [ ] é™„å¸¦å¤„ç†è„šæœ¬ï¼ˆå¦‚ QGIS é¡¹ç›®æˆ– GDAL å‘½ä»¤ï¼‰

## æ£€æŸ¥æ¸…å•
- [ ] éµå¾ªä»£ç é£æ ¼è§„èŒƒ
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æ²¡æœ‰æœªè§£å†³çš„æ³¨é‡Šæˆ– TODO
- [ ] æœ¬åœ°æµ‹è¯•é€šè¿‡
```

### PR æœ€ä½³å®è·µ

1. **ä¿æŒ PR å°è€Œä¸“æ³¨**ï¼šä¸€ä¸ª PR è§£å†³ä¸€ä¸ªé—®é¢˜æˆ–å®ç°ä¸€ä¸ªåŠŸèƒ½
2. **æä¾›æ¸…æ™°çš„æè¿°**ï¼šè¯´æ˜ä¸ºä»€ä¹ˆåšè¿™ä¸ªæ”¹åŠ¨ï¼Œè€Œä¸ä»…æ˜¯åšäº†ä»€ä¹ˆ
3. **åŒ…å«æµ‹è¯•**ï¼šæ–°åŠŸèƒ½åº”é…å¤‡æµ‹è¯•ï¼Œbug ä¿®å¤åº”åŒ…å«é˜²æ­¢å›é€€çš„æµ‹è¯•
4. **æ›´æ–°æ–‡æ¡£**ï¼šå¦‚æœæ”¹å˜äº†è¡Œä¸ºæˆ– APIï¼Œæ›´æ–°ç›¸å…³æ–‡æ¡£
5. **ä¿æŒå†å²æ¸…æ™°**ï¼šå®šæœŸ rebase ä»¥ä¿æŒçº¿æ€§çš„ commit å†å²

---

## ä»£ç å®¡æŸ¥è¿‡ç¨‹

### å®¡æŸ¥è€…èŒè´£
- æ£€æŸ¥ä»£ç è´¨é‡ã€é€»è¾‘æ­£ç¡®æ€§
- ç¡®ä¿æµ‹è¯•è¦†ç›–å……åˆ†
- æä¾›å»ºè®¾æ€§åé¦ˆ
- è®¤å¯ä»£ç åä¼šç‚¹å‡» "Approve"

### æäº¤è€…èŒè´£
- å¯¹åé¦ˆåšå‡ºå›åº”ï¼ˆè¯¢é—®æ¾„æ¸…æˆ–è¿›è¡Œæ”¹è¿›ï¼‰
- æäº¤æ”¹è¿›çš„ä»£ç 
- æ¨é€æ›´æ–°åé€šçŸ¥å®¡æŸ¥è€…é‡æ–°å®¡æŸ¥

### åˆå¹¶æ¡ä»¶
- è‡³å°‘ä¸€ä½ç»´æŠ¤è€… approve
- æ‰€æœ‰è‡ªåŠ¨æ£€æŸ¥ï¼ˆæµ‹è¯•ã€lintï¼‰é€šè¿‡
- æ— å†²çªæˆ–å†²çªå·²è§£å†³

### åˆå¹¶å
- åˆ†æ”¯å°†è‡ªåŠ¨åˆ é™¤
- æ„Ÿè°¢è´¡çŒ®è€…ï¼

---

## æ•°æ®è´¡çŒ®æŒ‡å—

### æ·»åŠ å†å²äº‹ä»¶

**æ–‡ä»¶ä½ç½®**: `data/processed/events.geojson` æˆ– `data/raw/events_*.csv`

**å­—æ®µè¦æ±‚**:
```json
{
  "type": "Feature",
  "properties": {
    "id": "evt_å”å®‰å²ä¹‹ä¹±",
    "title": "å®‰å²ä¹‹ä¹±",
    "title_en": "An Lushan Rebellion",
    "start_year": 755,
    "start_month": 12,
    "end_year": 763,
    "end_month": 2,
    "description": "å”ç„å®—ç»Ÿæ²»åæœŸï¼Œå®‰ç¦„å±±ã€å²æ€æ˜å‘åŠ¨çš„å¤§è§„æ¨¡å›ä¹±...",
    "event_type": "war",  // å¦‚ war, diplomacy, culture, disaster
    "participants": ["per_å®‰ç¦„å±±", "per_å²æ€æ˜", "per_å”ç„å®—"],
    "locations": ["place_é•¿å®‰", "place_æ´›é˜³"],
    "sources": [
      {
        "title": "èµ„æ²»é€šé‰´",
        "author": "å¸é©¬å…‰",
        "url": "https://...",
        "accessed_date": "2025-01-01"
      }
    ],
    "confidence": 0.95,  // æ•°æ®å¯ä¿¡åº¦ 0-1
    "contributors": ["username1", "username2"]
  },
  "geometry": {
    "type": "Point",
    "coordinates": [104.0658, 34.2658]  // [ç»åº¦, çº¬åº¦]
  }
}
```

### æ·»åŠ å†å²äººç‰©

**æ–‡ä»¶ä½ç½®**: `data/processed/persons.geojson`

**å¿…éœ€å­—æ®µ**:
```json
{
  "type": "Feature",
  "properties": {
    "id": "per_æä¸–æ°‘",
    "name": "æä¸–æ°‘",
    "name_en": "Li Shimin",
    "birth_year": 598,
    "death_year": 649,
    "biography": "å”å¤ªå®—ï¼Œæ°å‡ºçš„æ”¿æ²»å®¶ä¸å†›äº‹å®¶...",
    "roles": ["emperor", "military_general", "reformer"],
    "related_events": ["evt_ç„æ­¦é—¨ä¹‹å˜", "evt_å”ç¼…æˆ˜äº‰"],
    "sources": [...],
    "confidence": 0.98,
    "contributors": [...]
  }
}
```

### è´¡çŒ®åœ°å›¾è¾¹ç•Œ

**å·¥å…·**: QGISï¼ˆæ¨èï¼‰ã€GDAL/ogr2ogr

**æ­¥éª¤**:
1. åœ¨ QGIS ä¸­åŠ è½½å†å²åº•å›¾æˆ–å‚è€ƒæ•°æ®
2. åˆ›å»ºæ–°å›¾å±‚ï¼ŒçŸ¢é‡åŒ–è¾¹ç•Œï¼ˆå¤šè¾¹å½¢ï¼‰
3. ä¸ºæ¯ä¸ªè¡Œæ”¿å•å…ƒæ·»åŠ å±æ€§ï¼š
   - `name`: è¡Œæ”¿å•å…ƒåç§°
   - `valid_from`: æœ‰æ•ˆèµ·å§‹å¹´ä»½
   - `valid_to`: æœ‰æ•ˆç»“æŸå¹´ä»½
   - `type`: è¡Œæ”¿ç­‰çº§ï¼ˆprovince, prefecture, county, etc.)
   - `source`: æ•°æ®æ¥æº
   - `authority`: å‚è€ƒæ–‡çŒ®
4. å¯¼å‡ºä¸º GeoJSONï¼š
```bash
ogr2ogr -f GeoJSON output.geojson input.shp
```
5. éªŒè¯ GeoJSON æœ‰æ•ˆæ€§ï¼š
```bash
jq empty output.geojson  # jq åº”è¯¥æ— è¾“å‡ºï¼ˆè¡¨ç¤ºæœ‰æ•ˆï¼‰
```

### æ•°æ®è´¨é‡æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰å¿…éœ€å­—æ®µéƒ½å·²å¡«å……
- [ ] åæ ‡ç³»ç»Ÿä¸€è‡´ï¼ˆEPSG:4326ï¼‰
- [ ] å‡ ä½•æœ‰æ•ˆï¼ˆæ— è‡ªäº¤ã€å°é—­ç­‰ï¼‰
- [ ] æ•°æ®æ¥æºæ¸…æ™°å¯å¼•ç”¨
- [ ] ä¿¡æ¯ç»è¿‡éªŒè¯æˆ–æ ‡æ³¨å¯ä¿¡åº¦
- [ ] GeoJSON æ ¼å¼æ­£ç¡®ï¼ˆé€šè¿‡ `jq` éªŒè¯ï¼‰
- [ ] æ²¡æœ‰æ•æ„Ÿæˆ–ç‰ˆæƒé—®é¢˜

---

## è®¸å¯ä¸ç½²å

### ä»£ç è®¸å¯
æ‰€æœ‰ä»£ç è´¡çŒ®éµå¾ª MIT Licenseã€‚æäº¤ä»£ç å³è¡¨ç¤ºä½ åŒæ„åœ¨ MIT è®¸å¯ä¸‹å‘å¸ƒã€‚

### æ•°æ®è®¸å¯
æ‰€æœ‰æ•°æ®è´¡çŒ®éµå¾ª CC-BY-4.0 Licenseã€‚è¿™æ„å‘³ç€ï¼š
- ä»–äººå¯ä»¥è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†å‘ä½ çš„æ•°æ®
- å¿…é¡»æ˜ç¡®ç½²åä½ çš„è´¡çŒ®
- ä»»ä½•è¡ç”Ÿä½œå“ä¹Ÿè¦éµå¾ªç›¸åŒè®¸å¯

### ç¬¬ä¸‰æ–¹èµ„æº
å¦‚æœä½ ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹æ•°æ®ï¼ˆå¦‚ CHGISã€OpenStreetMapï¼‰ï¼Œè¯·ç¡®ä¿ï¼š
1. éµå¾ªå…¶åŸæœ‰è®¸å¯
2. åœ¨æäº¤çš„ PR æˆ–æ•°æ®æºæ³¨é‡Šä¸­æ¸…æ™°æ ‡æ³¨
3. åœ¨ `data/SOURCES.md` ä¸­æ·»åŠ ç›¸åº”çš„ç½²åå’Œè®¸å¯ä¿¡æ¯

**ç¤ºä¾‹**:
```markdown
## æ•°æ®æ¥æº

### Tang Dynasty Boundaries
- **æ¥æº**: CHGIS v6.0 (Harvard, Center for Geographic Analysis)
- **è®¸å¯**: [CHGIS License](http://www.fas.harvard.edu/~chgis/data/v6/)
- **å¼•ç”¨**: 
  ```bibtex
  @dataset{chgis2021,
    title={China Historical GIS, Version 6},
    author={...},
    year={2021},
    url={...}
  }
  ```
- **è´¡çŒ®è€…**: @username1, @username2
```

---

## è·å–å¸®åŠ©

- **æŠ€æœ¯é—®é¢˜ï¼Ÿ** åœ¨ [Issues](https://github.com) æˆ– [Discussions](https://github.com) ä¸­æé—®
- **ä¸ç¡®å®šå¦‚ä½•è´¡çŒ®ï¼Ÿ** æŸ¥çœ‹ [ROADMAP.md](./ROADMAP.md) æˆ–åœ¨ Discussions ä¸­å¯»æ±‚å»ºè®®
- **æƒ³è¦å®æ—¶äº¤æµï¼Ÿ** åŠ å…¥æˆ‘ä»¬çš„ Discord é¢‘é“ï¼ˆé“¾æ¥è§ READMEï¼‰

---

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„äººï¼ä½ ä»¬çš„çƒ­æƒ…ä¸æ”¯æŒæ˜¯é¡¹ç›®æŒç»­å‘å±•çš„åŠ¨åŠ›ã€‚

**å¿«ä¹è´¡çŒ®ï¼** ğŸ‰

---

*æœ€åæ›´æ–°: 2025-12-13*  
*è´¡çŒ®æŒ‡å—ç‰ˆæœ¬: 1.0*
